<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fuse Time-Current Curves</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
  <h2 style="text-align:center;">Fuse Time-Current Curves</h2>

  <!-- Dropdown -->
  <div style="text-align:center; margin:20px;">
    <label for="fuseDropdown">Select a Fuse:</label>
    <select id="fuseDropdown"></select>
  </div>

  <!-- Plotly chart -->
  <div id="chart" style="width:90%;height:80%;margin:auto;"></div>

  <script>
    async function loadData() {
      // Load the JSON file (must be in same folder or adjust path)
      const response = await fetch("fuses.json");
      const data = await response.json();

      const dropdown = document.getElementById("fuseDropdown");

      // Populate dropdown with all fuse part numbers
      for (let fuse in data) {
        let option = document.createElement("option");
        option.value = fuse;
        option.text = fuse;
        dropdown.appendChild(option);
      }

      // Initial plot (first fuse in list)
      let firstFuse = Object.keys(data)[0];
      plotFuse(firstFuse, data);

      // Update plot when dropdown changes
      dropdown.addEventListener("change", function() {
        plotFuse(this.value, data);
      });
    }

    function plotFuse(fuseName, data) {
      const trace = {
        x: data[fuseName].x,
        y: data[fuseName].y,
        mode: "lines+markers",
        type: "scatter",
        hovertemplate: "Current: %{x}<br>Time: %{y}<extra></extra>",
        line: {color: "blue"},
        marker: {size: 8, color: "red"}
      };

      const layout = {
        title: `Time-Current Curve: ${fuseName}`,
        hovermode: "closest",
        xaxis: { title: "Current (A)", type: "log" },
        yaxis: { title: "Time (s)", type: "log" }
      };

      Plotly.newPlot("chart", [trace], layout);
    }

    loadData();
  </script>
</body>
</html>
